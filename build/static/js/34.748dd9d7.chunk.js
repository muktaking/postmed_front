(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[34],{206:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(189),r=a.n(n);function l(e,t,a){var n=(t-1)*a;return r()(e).slice(n).take(a).value()}},603:function(e,t,a){"use strict";a.r(t);var n=a(137),r=a(0),l=a.n(r),c=a(167),o=a(23),s=a(153),i=a(146),m=a(49),u=a(56),d=a(270),g=a(163),E=a(605),b=a(182),f=a(156),p=a(612),v=a(192),y=a(610),S=l.a.forwardRef((function(e,t){var a=e.questionId,n=Object(f.a)(e,["questionId"]),r=Object(o.c)();return l.a.createElement(p.a,Object.assign({id:"popover-basic"},n,{ref:t}),l.a.createElement(p.a.Title,{as:"h3"},"Are You sure to delete this question"),l.a.createElement(p.a.Content,null,l.a.createElement(c.a,{variant:"danger",size:"sm",className:"mx-2",onClick:function(){r(Object(m.c)(a))}},"Yes")))}));function h(e){var t=e.question,a=e.viewHandler;return l.a.createElement("div",null,l.a.createElement("p",{style:{fontSize:"1.1rem"}},t.qText+" --\x3e  ",l.a.createElement(v.a,{variant:"secondary"},t.qType+" "),l.a.createElement(c.a,{variant:"primary",size:"sm",className:"mx-2",disabled:!a,onClick:function(){a("edit",t.id)}}," ","Edit"," "),l.a.createElement(y.a,{trigger:"click",placement:"bottom",overlay:l.a.createElement(S,{questionId:t.id})},l.a.createElement(c.a,{variant:"danger",size:"sm",className:"mr-2"},"Delete"))))}var q=a(51);function j(e){var t=e.values,a=e.errors,n=e.handleChange,c=Object(o.c)(),s=Object(o.d)((function(e){return e.category.categories}));return Object(r.useEffect)((function(){c(Object(q.c)())}),[c]),l.a.createElement("div",null,l.a.createElement(b.a.Group,{controlId:"formGroupQuestionTitle"},l.a.createElement(b.a.Label,null,"Question Title"),l.a.createElement(b.a.Control,{type:"text",placeholder:"Question Title",name:"title",value:t.title,onChange:n}),l.a.createElement("span",{className:"errorMessage"},a.title)),l.a.createElement(b.a.Group,{controlId:"formGridCategory"},l.a.createElement(b.a.Label,null,"Question Category"),l.a.createElement(b.a.Control,{as:"select",name:"category",value:t.category,onChange:n},l.a.createElement("option",null,"Select..."),s.map((function(e,t){var a=e.slug.replace(/_/g," / ");if("Free"!==e.name&&"Featured"!==e.name&&"Uncategorized"!==e.name)return l.a.createElement("option",{key:t,value:e.id},a)}))),l.a.createElement("span",{className:"errorMessage"},a.category)),l.a.createElement(b.a.Group,{controlId:"formGridQType"},l.a.createElement(b.a.Label,null,"Question Category"),l.a.createElement(b.a.Control,{as:"select",name:"qType",value:t.qType,onChange:n},l.a.createElement("option",{value:"matrix"},"Matrix"),l.a.createElement("option",{value:"sba"},"SBA")),l.a.createElement("span",{className:"errorMessage"},a.category)),l.a.createElement(b.a.Group,{controlId:"formGroupQuestionQText"},l.a.createElement(b.a.Label,null,"Question Text"),l.a.createElement(b.a.Control,{type:"text",placeholder:"Question text",name:"qText",value:t.qText,onChange:n}),l.a.createElement("span",{className:"errorMessage"},a.qText)))}function O(e){var t=e.values,a=e.errors,n=e.handleChange;return l.a.createElement("div",null,l.a.createElement(b.a.Group,{controlId:"formGroupQuestionTitle"},l.a.createElement(b.a.Label,null,"General Feedback"),l.a.createElement(b.a.Control,{type:"text",placeholder:"feedback",name:"generalFeedback",value:t.generalFeedback,onChange:n}),l.a.createElement("span",{className:"errorMessage"},a.generalFeedback)),l.a.createElement(b.a.Group,{controlId:"formGroupQuestionQText"},l.a.createElement(b.a.Label,null,"Question Tags"),l.a.createElement(b.a.Control,{type:"text",placeholder:"tag, tags",name:"tags",value:t.tags,onChange:n}),l.a.createElement("span",{className:"errorMessage"},a.tags)))}var C=a(162),x=a(139),T=a(291);function k(e){var t=e.values,a=e.stems,n=(e.errors,e.handleChange),r=e.stemInc,o=e.stemDec;return console.log(t),l.a.createElement("div",null,a.map((function(e,a){return l.a.createElement(C.a,{className:"pr-3 pl-2 mt-1"},l.a.createElement(x.a,{lg:5},l.a.createElement(b.a.Group,{controlId:"formGroupQuestionStem"},l.a.createElement(T.a,{className:"mb-2"},l.a.createElement(T.a.Prepend,null,l.a.createElement(T.a.Text,null,a)),l.a.createElement(b.a.Control,{type:"text",placeholder:"stem...",name:"qStem"+a,value:t["qStem"+a],onChange:n})))),l.a.createElement(x.a,{lg:2},l.a.createElement(b.a.Group,{as:x.a,controlId:"formGroupQuestionStemAnswer"},"matrix"===t.qType?l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a.Check,{inline:!0,type:"radio",label:"True",name:"aStem"+a,id:"formHorizontalRadios1",value:1,checked:"1"===t["aStem"+a],onChange:n}),l.a.createElement(b.a.Check,{inline:!0,type:"radio",label:"False",name:"aStem"+a,id:"formHorizontalRadios2",value:0,checked:"0"===t["aStem"+a],onChange:n})):l.a.createElement(b.a.Check,{type:"radio",name:"aStemSba",id:"formHorizontalRadios1",value:a,checked:t.aStemSba===a.toString(),onChange:n}))),l.a.createElement(x.a,{lg:5},l.a.createElement(b.a.Group,{as:x.a,controlId:"formGroupQuestionStemFeedBack"},l.a.createElement(b.a.Control,{type:"text",placeholder:"FeedBack",name:"fbStem"+a,value:t["fbStem"+a],onChange:n}))))})),l.a.createElement("div",{className:"mt-2 mb-5"},l.a.createElement(c.a,{className:"mr-3",onClick:r},"Plus"),l.a.createElement(c.a,{onClick:function(e){o(e)}},"Minus")))}var N=function(e){if("number"===typeof e){for(var t=[],a=0;a<e;a++)t.push({qStem:"",aStem:"",fbStem:""});return t}return e};function w(e,t,a){return function(n,r){var l=r.setSubmitting,c="";n.stems&&n.stems.length>0&&n.qStem0?n.stems.forEach((function(e,t){t>0&&!n["qStem"+(t-1)]&&n["qStem"+t]?c+=" Stem's No.".concat(t-1," qStem can not be empty"):"matrix"!==n.qType||!n["aStem"+t]&&!n["fbStem"+t]||n["qStem"+t]?"matrix"===n.qType&&n["qStem"+t]&&!n["aStem"+t]?c+=" Stem's No.".concat(t," qStem or aStem can not be empty"):"sba"===n.qType&&n["fbStem"+t]&&!n["qStem"+t]?c+=" Stem's No.".concat(t," qStem can not be empty"):"sba"!==n.qType||n["qStem"+n.aStemSba]||(c+=" Stem's No.".concat(n.aStemSba," qStem or aStem can not be empty")):c+=" Stem's No.".concat(t," qStem can not be empty"),""===c&&(e.qStem=n["qStem"+t],e.aStem="matrix"===n.qType?n["aStem"+t]:(parseInt(n.aStemSba)+1).toString(),e.fbStem=n["fbStem"+t],console.log(e))})):(c+="Stems can not be emty",n.stems=Object(u.a)(N(e))),""===c?(n.stems=n.stems.filter((function(e){return e.qStem})),t(a?Object(m.d)(n.id,{title:n.title,category:n.category,qType:n.qType,qText:n.qText,stem:n.stems,generalFeedback:n.generalFeedback,tags:[n.tags]}):Object(m.a)({title:n.title,category:n.category,qType:n.qType,qText:n.qText,stem:n.stems,generalFeedback:n.generalFeedback,tags:[n.tags]})),l(!0)):(alert(JSON.stringify(c,null,2)),l(!1))}}function H(e){var t=e.viewHandler,a=Object(r.useState)(5),s=Object(n.a)(a,2),i=s[0],f=s[1],p=Object(r.useState)(N(5)),v=Object(n.a)(p,2),y=v[0],S=v[1],q=Object(o.c)(),C=Object(o.d)((function(e){return e.question.loading})),x=Object(o.d)((function(e){return e.question.response})),T=function(){S(N(i+1)),f(i+1)},H=function(e){delete e["qStem"+(i-1)],delete e["aStem"+(i-1)],delete e["fbStem"+(i-1)],S(N(i-1)),f(i-1)};return l.a.createElement("div",null,C&&l.a.createElement(g.a,{animation:"grow",role:"status",variant:"dark",className:"content-center"}),l.a.createElement(E.a,{show:x,onClose:function(){q(Object(m.g)())},style:{position:"fixed",right:"20px"}},l.a.createElement(E.a.Header,null,l.a.createElement("strong",{className:"mr-auto"},x&&"result"in x?"Question Created Successfully":"Error Message")),l.a.createElement(E.a.Body,null,x&&"result"in x?l.a.createElement(h,{question:x.result,viewHandler:t}):x)),l.a.createElement("h3",null,"Create Question"),l.a.createElement(d.a,{initialValues:{title:"",category:"",qType:"matrix",qText:"",stems:Object(u.a)(y),generalFeedback:"",tags:""},validate:function(e){var t={};return e.title?e.category?e.qText||(t.qText="Required"):t.category="Required":t.title="Required",t},onSubmit:w(i,q)},(function(e){var t=e.values,a=e.errors,n=e.handleChange,r=e.handleSubmit;return l.a.createElement(b.a,{onSubmit:r},l.a.createElement(j,{values:t,errors:a,handleChange:n}),l.a.createElement(k,{stems:y,values:t,errors:a,handleChange:n,stemInc:T,stemDec:H}),l.a.createElement(O,{values:t,errors:a,handleChange:n}),l.a.createElement(c.a,{type:"submit",className:"mt-3 btn-submit"},"Submit"))})))}var Q=a(52),F=a(60),I=a(27),G=a.n(I),z={position:"fixed",right:"20px",zIndex:"10000"};function R(e){var t=e.viewHandler,a=e.id,s=Object(r.useState)(5),i=Object(n.a)(s,2),f=i[0],p=i[1],v=Object(r.useState)(N(5)),y=Object(n.a)(v,2),S=y[0],q=y[1],C=Object(o.c)(),x=Object(o.d)((function(e){return e.question.loading})),T=Object(o.d)((function(e){return e.question.response})),H=Object(r.useState)({id:null,title:"",category:"",qType:"matrix",qText:"",stems:Object(u.a)(S),generalFeedback:"",tags:""}),I=Object(n.a)(H,2),R=I[0],M=I[1];Object(r.useEffect)((function(){G.a.get("https://bcs.backend.rajdoctors.com/questions/"+a).then((function(e){var t={id:e.data.id,title:e.data.title,category:e.data.categoryId,qType:e.data.qType,qText:e.data.qText,stems:e.data.stems,generalFeedback:e.data.generalFeedback,tags:e.data.tags};e.data.stems.forEach((function(e,a){var n;t=Object(F.a)({},t,(n={},Object(Q.a)(n,"qStem"+a,e.qStem),Object(Q.a)(n,"aStem"+a,"matrix"===t.qType&&e.aStem.toString()),Object(Q.a)(n,"fbStem"+a,e.fbStem),Object(Q.a)(n,"aStemSba",null),n))})),"sba"===e.data.qType&&(t.aStemSba=(e.data.stems[0].aStem-1).toString()),M(t)})).catch((function(e){return console.log(e)}))}),[a]);var B=function(){q(N(f+1)),p(f+1)},L=function(e){delete e["qStem"+(f-1)],delete e["aStem"+(f-1)],delete e["fbStem"+(f-1)],q(N(f-1)),p(f-1)};return l.a.createElement("div",null,x&&l.a.createElement(g.a,{animation:"grow",role:"status",variant:"dark",className:"content-center"}),l.a.createElement(E.a,{show:T,onClose:function(){C(Object(m.g)())},style:z},l.a.createElement(E.a.Header,null,l.a.createElement("strong",{className:"mr-auto"},"Question Edited Successfully")),l.a.createElement(E.a.Body,null,T&&"id"in T?l.a.createElement(h,{question:T,viewHandler:t}):"Error occured")),l.a.createElement("h3",null,"Edit Question"),l.a.createElement(d.a,{enableReinitialize:!0,initialValues:R,validate:function(e){var t={};return e.title?e.category?e.qText||(t.qText="Required"):t.category="Required":t.title="Required",t},onSubmit:w(f,C,!0)},(function(e){var t=e.values,a=e.errors,n=e.handleChange,r=e.handleSubmit;return l.a.createElement(b.a,{onSubmit:r},l.a.createElement(j,{values:t,errors:a,handleChange:n}),l.a.createElement(k,{stems:S,values:t,errors:a,handleChange:n,stemInc:B,stemDec:L}),l.a.createElement(O,{values:t,errors:a,handleChange:n}),l.a.createElement(c.a,{type:"submit",className:"mt-3 btn-submit"},"Submit"))})))}var M=a(208),B=a(266),L=a.n(B),P=a(206);function D(e){var t=e.viewHandler,a=Object(r.useState)(1),c=Object(n.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(null),d=Object(n.a)(u,2),f=d[0],p=d[1],v=Object(o.c)(),y=Object(o.d)((function(e){return e.category.categories})),S=Object(o.d)((function(e){return e.question.questions})),j=Object(o.d)((function(e){return e.question.loading})),O=Object(o.d)((function(e){return e.question.response}));Object(r.useEffect)((function(){v(Object(q.c)())}),[v]);var C=Object(P.a)(S,s,10);return l.a.createElement("div",null,j&&l.a.createElement(g.a,{animation:"grow",role:"status",variant:"dark",className:"content-center"}),l.a.createElement(E.a,{show:O,onClose:function(){v(Object(m.g)()),v(Object(m.e)(f))},style:{position:"fixed",right:"20px"}},l.a.createElement(E.a.Header,null,l.a.createElement("strong",{className:"mr-auto"},"Response")),l.a.createElement(E.a.Body,null,O&&"message"in O?O.message:JSON.stringify(O))),l.a.createElement("div",{className:"d-flex"},l.a.createElement("div",null,l.a.createElement(b.a.Group,{controlId:"categoryType",className:"mr-5"},l.a.createElement(b.a.Label,null,"Category Type"),l.a.createElement(b.a.Control,{as:"select",name:"categoryType",onChange:function(e){v(Object(m.e)(e.target.value)),p(e.target.value)}},l.a.createElement("option",{value:""},"Select..."),y.map((function(e){var t=e.slug.replace(/_/g," / ");return l.a.createElement("option",{value:e.id},t)}))))),l.a.createElement("div",null,l.a.createElement(M.a,{className:"my-2"},S.length<1&&l.a.createElement("p",{className:"text-danger"},"No Question in this category."),C.map((function(e,a){return l.a.createElement(M.a.Item,{key:e.id,variant:a%2===0?"dark":"light",className:"d-flex"},l.a.createElement("div",{className:"mt-1 mr-3"},(a+1)*s,"."),l.a.createElement(h,{question:e,viewHandler:t}))}))))),l.a.createElement(L.a,{activePage:s,itemsCountPerPage:10,totalItemsCount:S.length,pageRangeDisplayed:4,onChange:function(e){i(e)},itemClass:"page-item",linkClass:"page-link",prevPageText:"Previous",nextPageText:"Next"}))}var _=a(178),U=a.n(_),A=a(61),J=a(590);function Y(e){var t=e.index,a=e.question,o=(e.viewHandler,Object(r.useState)(!1)),s=Object(n.a)(o,2),i=s[0],m=s[1],u=function(){return m(!1)};return l.a.createElement("div",null,l.a.createElement(J.a,{show:i,onHide:u},l.a.createElement(J.a.Header,{closeButton:!0},l.a.createElement(J.a.Title,null,"Edit Question")),l.a.createElement(J.a.Body,null,l.a.createElement(R,{id:a.id})),l.a.createElement(J.a.Footer,null,l.a.createElement(c.a,{variant:"secondary",onClick:u},"Close"))),l.a.createElement("p",{style:{fontSize:"1.1rem"}},t+1+". "+a.qText+" --\x3e  ",l.a.createElement(v.a,{variant:"secondary"},a.qType+" "),l.a.createElement(c.a,{variant:"primary",size:"sm",className:"mx-2",onClick:function(){return m(!0)}}," ","Edit"," "),l.a.createElement(y.a,{trigger:"click",placement:"bottom",overlay:l.a.createElement(S,{questionId:a.id})},l.a.createElement(c.a,{variant:"danger",size:"sm",className:"mr-2"},"Delete"))))}var V=function(e){var t=e.viewHandler,a=Object(o.c)(),s=Object(o.d)((function(e){return e.category.categories})),i=Object(r.useState)({category:void 0,file:void 0}),m=Object(n.a)(i,2),u=m[0],d=m[1],f=Object(r.useState)(void 0),p=Object(n.a)(f,2),v=p[0],y=p[1],S=Object(r.useState)(void 0),h=Object(n.a)(S,2),j=h[0],O=h[1],C=Object(r.useState)(null),x=Object(n.a)(C,2),T=x[0],k=x[1],N=Object(r.useState)(!1),w=Object(n.a)(N,2),H=w[0],Q=w[1],F=Object(r.useState)([]),I=Object(n.a)(F,2),z=I[0],R=I[1];Object(r.useEffect)((function(){a(Object(q.c)())}),[a]);var M=function(e){var t=e.target,a=t.name,n=t.value,r=t.files,l=u;switch(a){case"category":l.category=U.a.isInt(n)||U.a.isMongoId(n)?void 0:"Category is not valid"}d(l),"file"===a&&y(r?r[0]:void 0),"category"===a&&O(n)};return l.a.createElement("div",null,H&&l.a.createElement(g.a,{animation:"grow",role:"status",variant:"dark",className:"content-center"}),l.a.createElement(E.a,{show:T,onClose:function(){k(null),R([])},style:{height:"100vh",position:"fixed",right:"20px",overflowY:"scroll",overflowX:"hidden"}},l.a.createElement(E.a.Header,null,l.a.createElement("strong",{className:"mr-auto"},"Response")),l.a.createElement(E.a.Body,null,l.a.createElement("p",null,T+" ",z.length>0&&z.length),l.a.createElement("div",null,z.length>0&&z.map((function(e,a){return l.a.createElement(Y,{key:a,index:a,question:e,viewHandler:t})}))))),l.a.createElement("h3",null," Upload by Excel file"),l.a.createElement(b.a,{className:"mt-2",onSubmit:function(e){e.preventDefault();var t=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];console.log(a,e);var r=!0,l="";return Object.values(e).forEach((function(e){e&&(r=!1)&&(l=e),e&&(l=e)})),Object.values(a).forEach((function(e){void 0===e&&(r=!1)})),{valid:r,error:l}}(u,v,j),a=t.valid,n=t.error;if(a){var r=new FormData;r.append("file",v),r.append("category",j),Q(!0),G.a.post("https://bcs.backend.rajdoctors.com/questions/files",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){R(e.data),k("Successfully Updated"),Q(!1)})).catch((function(e){k(Object(A.a)(e)),Q(!1)}))}else k("Please fill form corectly"+(n?" __ "+n.toUpperCase()+" __":""))}},l.a.createElement(b.a.Group,{controlId:"formGridCategory"},l.a.createElement(b.a.Label,null,"Question Category"),l.a.createElement(b.a.Control,{as:"select",name:"category",onChange:M},l.a.createElement("option",{value:""},"Select"),s.map((function(e,t){var a=e.slug.replace(/_/g," / ");return l.a.createElement("option",{key:t,value:e.id},a)}))),u.category&&l.a.createElement("span",{className:"errorMessage"},u.category)),l.a.createElement(b.a.Group,null,l.a.createElement(b.a.Label,null,"Upload an excel file"),l.a.createElement("input",{type:"file",name:"file",className:"form-control-file",onChange:M})),l.a.createElement(c.a,{type:"submit",className:"btn-submit"},"Submit")))};a.d(t,"default",(function(){return K}));var X=function(e){var t=e.viewHandler,a=e.disable;return l.a.createElement("div",{className:"my-3"},l.a.createElement(s.a,i.a.Question.metaInfo),l.a.createElement(c.a,{variant:"primary",size:"bg",className:"mr-3 mt-3",disabled:"create"===a,onClick:function(){t("create")}},"Create Question"),l.a.createElement(c.a,{variant:"primary",size:"bg",className:"mr-3 mt-3",disabled:"upload"===a,onClick:function(){t("upload")}},"Upload An Excel File"),l.a.createElement(c.a,{variant:"primary",size:"bg",className:"mt-3",disabled:"select"===a,onClick:function(){t("select")}},"Select Questions For Edit"))};function K(){var e=Object(r.useState)(),t=Object(n.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(null),i=Object(n.a)(s,2),u=i[0],d=i[1],g=Object(o.c)(),E=function(e,t){g(Object(m.g)()),t&&d(t),c(e)};switch(a){case"create":return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(X,{viewHandler:E,disable:"create"})," ",l.a.createElement(H,{viewHandler:E})," ");case"upload":return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(X,{viewHandler:E,disable:"upload"})," ",l.a.createElement(V,{viewHandler:E})," ");case"select":return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(X,{viewHandler:E,disable:"select"})," ",l.a.createElement(D,{viewHandler:E})," ");case"edit":return l.a.createElement(l.a.Fragment,null," ",l.a.createElement(X,{viewHandler:E})," ",l.a.createElement(R,{viewHandler:E,id:u})," ");default:return l.a.createElement(X,{viewHandler:E})}}}}]);
//# sourceMappingURL=34.748dd9d7.chunk.js.map